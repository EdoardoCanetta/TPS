<html>

<head>
  <title>es 2</title>
  <style>
    table,
    th,
    td {
      border: 1px solid black;
    }
  </style>
</head>

<body>
  <h1 id="sksk">Es3</h1>
  <p>Pagina calcolatrice.</p>

  <div id="div1" style="background-color: rgb(41, 255, 87)">
    <h2>calcolatrice</h2>
  </div>

  <br /><br />

  <label for="num1">numero 1:</label>
  <input type="number" id="num1" name="num1" /><br /><br />
  <label for="num2">numero 2:</label>
  <input type="number" id="num2" name="num2" /><br /><br />
  <button id="btn1">+</button>
  <button id="btn2">-</button>
  <button id="btn3">/</button>
  <button id="btn4">*</button>
  <br />
  <span id="span1"></span>

  <table id="tb">
    <tr>
      <th>n1</th>
      <th>n2</th>
      <th>operator</th>
      <th>result</th>
    </tr>
  </table>

  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script>
    $("#btn1").click(function () {
      calcola("+");
    });
    $("#btn2").click(function () {
      calcola("-");
    });
    $("#btn3").click(function () {
      calcola("/");
    });
    $("#btn4").click(function () {
      calcola("*");
    });

    var lastOp = localStorage.getItem("operation");
    if (!(typeof lastOp === undefined || typeof lastOp === null)) {
      $("#tb").append(lastOp);
    }

    function calcola(segno) {
      var n1 = parseInt($("#num1").val());
      var n2 = parseInt($("#num2").val());
      var risultato;
      switch (segno) {
        case "+":
          risultato = n1 + n2;
          break;
        case "-":
          risultato = n1 - n2;
          break;
        case "/":
          risultato = n1 / n2;
          break;
        case "*":
          risultato = n1 * n2;
          break;
      }
      var btn = document.createElement("button");
      btn.innerHTML = "Elimina";
      //btn.attr("style", "background-color:   rgb(255, 0, 0)");
      $("#tb").append("<tr>" + "<td>" + n1 + "</td>" +
        "<td>" + n2 + "</td>" +
        "<td>" + segno + "</td>" +
        "<td>" + risultato + "</td>" +
        "<td><button class=\"btnDelete\">Delete</button></td>"
      )
      

      var str = "<tr><td>" + n1 + "</td><td>" + n2 + "</td><td>" + segno + "</td><td>" + risultato + "</td><td><button class=\"btnDelete\">Delete</button></td></tr>";
      localStorage.setItem("operation", str);

      $("#tb").on('click', '.btnDelete', function () { $(this).closest('tr').remove(); });
    }  
  </script>
</body>

</html>